****************************************
*              WARSHIPS                *
*         A game for Roona             *
****************************************
	ORG $2000

TOPLEFT	EQU $400
COLS	EQU 40
ROWS	EQU 40

MAXX	EQU 30
MAXY	EQU 30
CELLWDT	EQU 3
CELLHGT	EQU 3

PRBYTE	EQU $FDDA
COUT	EQU $FDED
CROUT	EQU $FD8E

* Change to low-res graphics mode
GR	EQU $FB40

* Set low-res graphics color
*  A = color
SETCOL	EQU $F864

* Plot a block on Low-Res Screen
*  A = vertical, X-pos
*  Y = horizontal, Y-pos
*  A < SCRAMBLED
PLOT	EQU $F800

* Draw a horizontal line of blocks
*    A = row
*    Y = leftmost horizontal coord.
*  $2C = rightmost horizontal coord.
*    A < SCRAMBLED
*    Y < SCRAMBLED
HLINE	EQU $F819
HLINEND	EQU $2C
* Draw a vertical line of blocks
*    A = top vertical coordinate
*    Y = column
*  $2D = bottom vertical coordinate
*    A < SCRAMBLED
VLINE	EQU $F828
VLINEND	EQU $2D

* Clear the entire low-res screen
CLRSCR	EQU $F832
* Clear the top of the low-res screen
CLRTOP	EQU $F836

* Read the low-res screen
*  A = vertical, X-pos
*  Y = horizontal, Y-pos
*  A < color at (A,Y)
SCRN	EQU $F871


****************************************
*	JMP Init
Entry	JSR GR
	JSR CLRTOP
	LDA #$03
	JSR SETCOL
	LDA #MAXY
	STA VLINEND
	LDA #MAXX
	STA HLINEND
	JSR Grid
Exit	RTS

Init	CLC
	JSR CROUT
	LDX #0
Loop	CPX #MAXX+1
	BCS DOS
	TXA
	JSR PRBYTE
	JSR CROUT
	CLC
	TXA
	ADC #CELLWDT
	TAX
	JMP Loop

DOS	JMP $3D0

* DrawGrid
Grid	NOP
cols	LDX #0
cols1	CPX #MAXX+1
	BCS rows
	TXA
	TAY
	LDA #0
	JSR VLINE
	CLC
	TXA
	ADC #CELLWDT
	TAX
	JMP cols1
rows	LDX #0        FOR I  = 0
rows1	CPX #MAXY+1       I <= 30
	BCS GridZ
	TXA
	LDY #0
	JSR HLINE
	CLC
	TXA
	ADC #CELLHGT      I += 3
	TAX
	JMP rows1
GridZ	RTS


* vim: set noexpandtab tabstop=8 sts=8 sw=8 invlist textwidth=40 colorcolumn=40 filetype=asmMerlin65816:
